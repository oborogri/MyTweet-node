{{> mainmenu _id="settings" }}

<section class="ui raised segment">
    <div class="ui two column grid">
        <div class="ui six wide column">
            <div class="ui grid">
                <div class="ui card">
                        {{#if user.picture.data}}
                            <div class="image">
                                <img src="/getUserPicture/{{user.id}}" height="200" width="100" />
                            </div>
                        {{/if}}
                    </div>
                    <div class="extra content">
                        <h5>Upload profile picture up to 1 Mb</h5>
                        <form method="post" enctype="multipart/form-data" action="/profile_picture">
                            <input type="file" name="file">
                            <input type="submit" value="Upload">
                        </form>
                        {{> formerror }}
                    </div>
                </div>
            </div>
        <div class="ui ten wide column">
            <div class="ui stacked form segment">
                <form action="/update_settings" method="POST">
                    <h5 class="ui header">Update personal details</h5>
                    <div class="field">
                        <label>Email</label>
                        <input placeholder="Email" type="text" name="email">
                    </div>
                    <div class="field">
                        <label>Password</label>
                        <input type="password" name="password">
                    </div>
                    <button class="ui tiny grey submit button"><i class="settings icon"></i>Update</button>
                </form>
                {{> formerror }}
            </div>
            <div class="ui stacked form segment">
                <form class="ui form" action="/unfollow" method="POST">
                    <h5 class="ui header">Following:</h5>
                    <table class="ui selectable striped table segment">
                        <thead>
                        <tr>
                            <th>Select</th>
                            <th></th>
                            <th></th>
                            <th><i class="mail icon"></i></th>
                            <th><i class="twitter icon"></i></th>
                            <th><i class="users icon"></i></th>
                        </tr>
                        </thead>
                        <tbody>
                        {{#each following}}
                            <tr>
                                <td>
                                    <div class="ui checkbox">
                                        <input type="checkbox" id="usercheckbox" name="userId" value="{{_id}}">
                                        <label></label>
                                    </div>
                                </td>
                                <td></td>
                                <td>
                                    {{#if picture.data}}
                                    <a class="avatar">
                                        <img src="/getUserPicture/{{_id}}" class="ui mini circular inline image">
                                        <span></span>
                                    </a>
                                    {{/if}}
                                </td>
                                <td>
                                    <button class="ui basic small button" formaction="/user_timeline" name="email"
                                            value="{{email}}">
                                        <i class="home icon"></i>{{email}}
                                    </button>
                                </td>
                                <td> {{posts.length}} </td>
                                <td> {{followedBy.length}} </td>
                            </tr>
                        {{/each}}
                        </tbody>
                        <tfoot class="full-width">
                        <tr>
                            <th colspan="4">
                                <div class="ui buttons">
                                    <button class="ui tiny grey submit button"><i class="remove user icon"></i>Unfollow
                                    </button>
                                </div>
                            </th>
                        </tr>
                        </tfoot>
                    </table>
                </form>
            </div>
        </div>
    </div>
</section>